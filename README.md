# Java2RDF Plugin
***Java2RDF*** is a plugin for [Intellij IDEA](https://www.jetbrains.com/idea/) that extracts information from Java files and represents it in [RDF](https://www.w3.org/RDF/) model. Currently, the plugin's output is in [N3](https://www.w3.org/TeamSubmission/n3/) notation.

The main use case of ***Java2RDF*** plugin is to help source code analysis of Java programs in either of the two following approaches:
1. **Query-based analysis**. Simply stated, 
   1. Run the plugin on the Java program which you want to analyze.
   1. Store the output N3 file in an RDF store, like [RDF4J Workbench](http://docs.rdf4j.org/server-workbench-console/).
   1. Create queries based on what information you want to extract from the source code. For this purpose, you can use [SPARQL](https://www.w3.org/TR/rdf-sparql-query/) query language.
   1. Run the queries on the RDF store and get the results.
   
1. **Code-based analysis**. Simply stated, 
   1. Run the plugin on the Java program which you want to analyze.
   1. Develop a program that implements the logic of the analysis. In this program, read the output N3 file and perform the required analysis. For this purpose, you can use [Apache Jena](https://jena.apache.org/) library.
   
The first approach is fast and simple, but it is limited to the expressiveness that is provided by the query language. The second approach is more flexible and powerful but it needs programming. A sample program based on the second approach is presented at the end of this page.

For both of the above approaches, you need to get familiar to the structure of the plugin's output. The best way to do this, is to run the plugin on some small Java file. Further, you can check the underlying ontology, i.e. [Java2RDF Ontology](https://github.com/samadpaydar/Java2RDFPlugin/blob/master/Ontology/java2rdf.owl) which defines the structure of the plugin's output. 


## How to use the plugin?
1. Download [Java2RDFPlugin.zip](https://github.com/samadpaydar/Java2RDFPlugin/blob/master/Java2RDFPlugin.zip).
1. Run [Intellij IDEA](https://www.jetbrains.com/idea/).
1. In the **Welcome** window [Intellij IDEA](https://www.jetbrains.com/idea/), select **Configure** -> **Plugins** -> **Install plugin from disk...".
1. Browse and select **java2RDFPlugin.zip**.
1. Press OK and restart [Intellij IDEA](https://www.jetbrains.com/idea/).
1. When [Intellij IDEA](https://www.jetbrains.com/idea/) is started, open your project.
1. Click on the part of your project which you want to extract its information. This can be a single Java file, a package or the whole project.
1. From the **Analyze** menu, select **Convert to RDF** item. As the shortcut, you can press **Ctrl+Shift+D**.
1. Specify the file in which the output should be saved.
1. The execution log ot the plugin is shown in a tool window with the title **Java2RDF**. If this window is not automatically shown, go to **View** menu, select **Tool Windows**, and then select **Java2RDF**.

## Sample for code-based analysis
The following program loads the file **plugin_output.n3**, which is generated by the plugin, and executes a simple **SPARQL** query on the loaded model to retrieve the list of methods and their parameters count.

```java
import org.apache.jena.ontology.OntModel;
import org.apache.jena.ontology.OntModelSpec;
import org.apache.jena.query.*;
import org.apache.jena.rdf.model.*;
import java.io.File;

public class CodeBasedSample {
    public static void main(String[] args) {
        OntModel model = ModelFactory.createOntologyModel(OntModelSpec.RDFS_MEM);
        model.read(new File("plugin_output.n3").toURI().toString(), "N3");
        String queryString =
               "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> " +
               "PREFIX java2rdf: <http://java2rdf.um.ac.ir/> " +
               "SELECT ?method ?parameter_count " +
               "WHERE { " +
               "  ?method rdf:type java2rdf:Method . " +
               "  ?method java2rdf:hasParameterCount ?parameter_count . " +
               "}";
        Query query = QueryFactory.create(queryString);
        QueryExecution queryExecution = QueryExecutionFactory.create(query, model);
        ResultSet results = queryExecution.execSelect();
        while(results.hasNext()) {
            QuerySolution querySolution = results.nextSolution();
            RDFNode method = querySolution.get("method");
            Literal parameterCount = querySolution.getLiteral("parameter_count");
            System.out.printf("method %s has %d parameter(s)%n", method, parameterCount.getInt());
        }
    }
}

```

